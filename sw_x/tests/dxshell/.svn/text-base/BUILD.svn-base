c_and_cxx_flags = ''
cloudnode_c_and_cxx_flags = '-DCLOUDNODE=1'

cpp_binary(
    name = 'dxshell',
    includes = [
                '.',
                'types',
                '/tests/dx_remote_agent',
                '/storageNode/src'
               ],
    cflags = c_and_cxx_flags,
    cxxflags = c_and_cxx_flags,
    srcs = [
        'ccd_utils.cpp',
        'ccd_utils_linux.cpp',
        'common_utils.cpp',
        'cr_test.cpp',
        'proc_cmd.cpp',
        'EventQueue.cpp',
        'TimeStreamDownload.cpp',
        'clouddochttp.cpp',
        'picstreamhttp.cpp',
        'dataset.cpp',
        'dxshell.cpp',
        'mca_diag.cpp',
        'msa_diag.cpp',
        'setup_stream_test.cpp',
        'swup_diag.cpp',
        'RemoteAgent.cpp',
        'HttpAgent.cpp',
        'HttpAgentLocal.cpp',
        'HttpAgentRemote.cpp',
        'TargetDevice.cpp',
        'TargetLocalDevice.cpp',
        'TargetRemoteDevice.cpp',
        'types/dx_remote_agent.pb.cc',
        'autotest.cpp',
        'autotest_basic.cpp',
        'autotest_clouddoc.cpp',
        'autotest_common_utils.cpp',
        'autotest_mediametadata.cpp',
        'autotest_photo_share.cpp',
        'autotest_picstream.cpp',
        'autotest_picstreamIndexOnly.cpp',
        'autotest_remotefile.cpp',
        'autotest_streaming.cpp',
        'autotest_transcode.cpp',
        'ccdconfig.cpp',
        'target_cmds.cpp',
        'ts_test.cpp',
        'ts_testClient.cpp',
        'ts_test_network_test.cpp',
        'ts_test_configure_router.cpp',
        'vcs_test.cpp',
        'fs_test.cpp',
        'minidms_test.cpp',
        'photo_share_test.cpp',
        'vssi_stress_test.cpp',
        'vssi_common.cpp',
        'syncbox_test.cpp',
        'autotest_util.cpp',
        ],
    deps = [
        '/tests/dxshell/types:dx_remote_agent_proto',
        '/gvm_core/daemons/ccd:libccd_client',
        '/gvm_core/internal/media_metadata/impl:libmedia_metadata_priv',
        '/gvm_core/internal/csl:libcsl',
        '/gvm_core/internal/vssts/shim:libvsstsshim',
        '/gvm_core/internal/cJSON2:libcJSON2',
        '/gvm_core/internal/vcs:libvcs'
    ]
)

cpp_binary(
    name = 'dxshell_cloudnode',
    includes = [
                '.',
                'types',
                '/tests/dx_remote_agent',
                '/storageNode/src'
               ],
    cflags = cloudnode_c_and_cxx_flags,
    cxxflags = cloudnode_c_and_cxx_flags,
    srcs = [
        'ccd_utils.cpp',
        'ccd_utils_linux.cpp',
        'common_utils.cpp',
        'cr_test.cpp',
        'proc_cmd.cpp',
        'EventQueue.cpp',
        'TimeStreamDownload.cpp',
        'clouddochttp.cpp',
        'picstreamhttp.cpp',
        'dataset.cpp',
        'dxshell.cpp',
        'mca_diag.cpp',
        'msa_diag.cpp',
        'setup_stream_test.cpp',
        'swup_diag.cpp',
        'RemoteAgent.cpp',
        'HttpAgent.cpp',
        'HttpAgentLocal.cpp',
        'HttpAgentRemote.cpp',
        'TargetDevice.cpp',
        'TargetLocalDevice.cpp',
        'TargetRemoteDevice.cpp',
        'types/dx_remote_agent.pb.cc',
        'autotest.cpp',
        'autotest_basic.cpp',
        'autotest_clouddoc.cpp',
        'autotest_common_utils.cpp',
        'autotest_mediametadata.cpp',
        'autotest_photo_share.cpp',
        'autotest_picstream.cpp',
        'autotest_picstreamIndexOnly.cpp',
        'autotest_remotefile.cpp',
        'autotest_streaming.cpp',
        'autotest_transcode.cpp',
        'ccdconfig.cpp',
        'target_cmds.cpp',
        'ts_test.cpp',
        'ts_testClient.cpp',
        'ts_test_network_test.cpp',
        'ts_test_configure_router.cpp',
        'vcs_test.cpp',
        'fs_test.cpp',
        'minidms_test.cpp',
        'photo_share_test.cpp',
        'vssi_stress_test.cpp',
        'vssi_common.cpp',
        'syncbox_test.cpp',
        'autotest_util.cpp',
        ],
    deps = [
        '/tests/dxshell/types:dx_remote_agent_proto',
        '/gvm_core/daemons/ccd:libccd_client',
        '/gvm_core/internal/media_metadata/impl:libmedia_metadata_priv',
        '/gvm_core/internal/csl:libcsl',
        '/gvm_core/internal/vssts/shim:libvsstsshim',
        '/gvm_core/internal/cJSON2:libcJSON2',
        '/gvm_core/internal/vcs:libvcs'
    ]
)
